var SomSim=pc.createScript("somSim");SomSim.prototype.initialize=function(){var t=this.app;t.hasOwnProperty("som")||(t.som=this,this.isSomnium=!1,this.player=null,this.playerInputFrozen=!1)},SomSim.prototype.postInitialize=function(){if(!this.app.som.isSomnium){this.player=this.entity.parent.findByName("LocalPlayerSimulator"),this.player.enabled=!0;var t=this.app.root.children[0].findByTag("playerspawn");if(t.length>0){var i=t[Math.floor(Math.random()*t.length)];this.player.rigidbody.teleport(i.getPosition().clone(),i.getEulerAngles().clone())}setTimeout(function(){this.app.som.fire("player:joinWorld")}.bind(this),1e3)}},SomSim.prototype.webWorldInit=function(t){return new Promise(function(i,e){this.entity.findByName("Augment Platform Prefab").enabled=0!=t.type,i({success:!0})}.bind(this))},SomSim.prototype.setPlayerInputFrozen=function(t){this.playerInputFrozen=t};var SomWebWorld=pc.createScript("_som_webWorld");SomWebWorld.attributes.add("type",{title:"World Type",description:"Control how visitors load into your world. Augment Worlds get ADDED to the regular parcel build. Holistic Worlds REPLACE the regular parcel build.",type:"number",enum:[{"Holistic World":0},{"Augment World":1}],default:0}),SomWebWorld.attributes.add("allowedParcels",{title:"Allowed Parcels",type:"number",array:!0,description:"Explicitly list which PARCEL IDs that Somnium Space Web is allowed to use this world on. Leave blank to allow ANY parcel to use this world."}),SomWebWorld.attributes.add("sdkVersion",{title:"SDK Version",type:"number",enum:[{"v0-1-1":1}],default:1}),SomWebWorld.prototype.postInitialize=function(){var e,l={id:this.id,title:this.title,url:this.url,type:this.type,allowEverywhere:this.allowEverywhere,allowedParcels:this.allowedParcels,worldMixing:this.worldMixing,mixWorlds:this.mixWorlds,apiVersion:this.apiVersion};if(this.app.som.isSomnium){e=this.app.root.children[0].findByTag("disableIfSom");for(o=0;o<e.length;o++)e[o].enabled=!1;e=this.app.root.children[0].findByTag("enableIfSom");for(o=0;o<e.length;o++)e[o].enabled=!0}else{e=this.app.root.children[0].findByTag("disableIfNotSom");for(var o=0;o<e.length;o++)e[o].enabled=!1;e=this.app.root.children[0].findByTag("enableIfNotSom");for(var o=0;o<e.length;o++)e[o].enabled=!0}this.app.som.webWorldInit(l).then((e=>{e.success?console.log("Web World Initialized"):console.log(e.errorMessage)}))};var SomWebBrowser=pc.createScript("_som_webBrowser");SomWebBrowser.attributes.add("url",{type:"string",title:"URL",description:"URL to bind to this entity's model."}),SomWebBrowser.attributes.add("resolution",{type:"number",title:"Resolution",enum:[{Auto:0},{Low:1},{Medium:2},{High:3}],default:0,description:"Control the resolution scale of the web browser object."}),SomWebBrowser.attributes.add("autoPlay",{type:"boolean",title:"AutoPlay",default:!1,description:"Automatically activates this web browser object upon spawning into the world."}),SomWebBrowser.attributes.add("description",{type:"string",title:"UI Text",description:"Optional. The text to show on the menu when the user clicks on the object."}),SomWebBrowser.attributes.add("thumbnail",{type:"asset",title:"UI Thumbnail",assetType:"texture",description:"Appears in the menu when the user clicks on the object."}),SomWebBrowser.attributes.add("buttonGo",{type:"boolean",title:"UI Btn Go",default:!1,description:"Opens link in same window."}),SomWebBrowser.attributes.add("buttonNewTab",{type:"boolean",title:"UI Btn New Tab",default:!0,description:"Opens link in new window."}),SomWebBrowser.attributes.add("buttonInWorld",{type:"boolean",title:"UI Btn In-World",default:!0,description:"Opens link in-world."}),SomWebBrowser.prototype.initialize=function(){};var SomTexScrollManager=pc.createScript("_som_texScrollManager");SomTexScrollManager.attributes.add("materials",{title:"Materials to Scroll",type:"json",schema:[{title:"Material Asset",name:"material",type:"asset",assetType:"material"},{title:"Speed",name:"speed",type:"vec2"},{title:"Diffuse",name:"diffuse",type:"boolean",default:!0},{title:"Normal",name:"normal",type:"boolean",default:!1},{title:"Emissive",name:"emissive",type:"boolean",default:!1},{title:"Opacity",name:"opacity",type:"boolean",default:!1}],array:!0}),SomTexScrollManager.tmpVec2=new pc.Vec2,SomTexScrollManager.tmpOffset=new pc.Vec2,SomTexScrollManager.prototype.initialize=function(){},SomTexScrollManager.prototype.update=function(e){let a,t,l,o,r,s,i=SomTexScrollManager.tmpVec2,p=SomTexScrollManager.tmpOffset;for(let m=0;m<this.materials.length;m++)if(a=this.materials[m],t=a.material&&a.material.resource?a.material.resource:null,t){for(i.set(a.speed.x,a.speed.y),i.scale(e),l=[],a.diffuse&&l.push("diffuseMapOffset"),a.normal&&l.push("normalMapOffset"),a.emissive&&l.push("emissiveMapOffset"),a.opacity&&l.push("opacityMapOffset"),s=!1,o=0;o<l.length;o++)r=l[o],t[r]&&(p.copy(t[r]),p.add(i),t[r]=p,s=!0);s&&t.update()}};